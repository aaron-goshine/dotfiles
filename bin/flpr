#!/usr/bin/python
import sys
import os

def role_up(chars, key):
    charsList = list(chars)
    for i in range(len(charsList)):
        c = charsList[i]
        charsList[i] = hex(ord(c) ^ ((i << 8) + key))
    return ''.join(charsList) + "===";
        
def role_out(chars, key):
    chars = chars.replace('=', '')
    hexico = chars.split('0x')[1:]
    charsList = []
    for i in range(len(hexico)):
        hx = hexico[i]
        hexico[i] = chr(int('0x' + hx, 16) ^ ((i << 8) + key))
    return ''.join(hexico)
       

def main (chars, key = 1):
    if chars[-3:] == '===':
        return role_out(chars, key)
    else:
       return role_up(chars, key)

if len(sys.argv) >= 2:
    cipher = main(sys.argv[1])
    os.system("echo " + "'" + str(cipher) +"'" + "| pbcopy")
    print(cipher)
    print('On your clipboard!')
else:
    print('-you are only allowed 128 chars and size 8 key')







